---
import { Image } from 'astro:assets';
import ArviLogo from '@assets/LOGO_ARVI.png';
import { Icon } from 'astro-icon/components';
---

<section class="relative flex flex-col overflow-hidden pt-0 md:pt-0 pb-0 md:pb-0 min-h-screen">
  <!-- Imagen de fondo con overlay y efecto parallax -->
  <div class="absolute inset-0 z-0">
    <div class="absolute inset-0 bg-[url('/images/hero.webp')] bg-cover bg-center transform scale-105 origin-center" id="parallaxBg"></div>
    <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/70"></div>
  </div>

  <!-- Contenido: usamos estrategias diferentes para móvil vs desktop -->
  <div class="relative z-10 container mx-auto px-4 py-0 text-center text-white h-full">
    <!-- Versión móvil con scroll vertical - sin altura mínima para evitar cortes -->
    <div class="flex flex-col justify-start py-10 pb-24 md:hidden">
      <div class="max-w-4xl w-full mx-auto">
        <!-- Logo ARVI para móvil -->
        <div class="flex justify-center mt-4 mb-6">
          <Image 
            src={ArviLogo} 
            alt="ARVI Entretenciones" 
            width={250} 
            class="hover:scale-105 transition-transform duration-500"
          />
        </div>

        <h1 class="mb-4 text-5xl font-heading animate-fade-in">
          ¡<span class="text-arvi-accent">Diversión</span> 
          <span class="text-arvi-primary">Sin Límites</span>
          para Tus <span class="text-arvi-secondary">Eventos</span>! 
        </h1>
        <p class="mb-4 text-lg opacity-90 max-w-2xl mx-auto animate-fade-in animate-delay-100">
          Juegos mecánicos, inflables y soluciones sustentables para crear experiencias inolvidables. 
          Desde Algarrobo para todo Chile.
        </p>
        
        <!-- Iconos para móvil en disposición vertical -->
        <div class="mt-6 mb-8 grid grid-cols-1 gap-8 text-center">
          <div class="animate-fade-in animate-delay-200 transform hover:scale-105 transition-transform duration-300 py-2">
            <div class="flex justify-center mb-3">
              <Icon name="streamline-freehand:circus-tent" class="w-16 h-16 text-arvi-primary" />
            </div>
            <p class="text-base opacity-90">+15 años de experiencia</p>
          </div>
          <div class="animate-fade-in animate-delay-300 transform hover:scale-105 transition-transform duration-300 py-2">
            <div class="flex justify-center mb-3">
              <Icon name="mdi:leaf" class="w-16 h-16 text-arvi-secondary" />
            </div>
            <p class="text-base opacity-90">Soluciones eco-sustentables</p>
          </div>
          <div class="animate-fade-in animate-delay-400 transform hover:scale-105 transition-transform duration-300 py-2">
            <div class="flex justify-center mb-3">
              <Icon name="mdi:trophy" class="w-16 h-16 text-arvi-accent" />
            </div>
            <p class="text-base opacity-90">+1000 eventos realizados</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Versión desktop centrada verticalmente -->
    <div class="hidden md:flex flex-col justify-center items-center min-h-screen py-12">
      <div class="max-w-5xl w-full">
        <!-- Logo ARVI para desktop -->
        <div class="flex justify-center mb-8">
          <Image 
            src={ArviLogo} 
            alt="ARVI Entretenciones" 
            width={350} 
            class="hover:scale-105 transition-transform duration-500"
          />
        </div>

        <h1 class="mb-6 text-5xl lg:text-6xl font-heading animate-fade-in">
          ¡<span class="text-arvi-accent">Diversión</span> 
          <span class="text-arvi-primary">Sin Límites</span>
          para Tus <span class="text-arvi-secondary">Eventos</span>! 
        </h1>
        <p class="mb-8 text-2xl opacity-90 max-w-2xl mx-auto animate-fade-in animate-delay-100 text-shadow-black">
          Juegos mecánicos, inflables y soluciones sustentables para crear experiencias inolvidables. 
          Desde Algarrobo para todo Chile.
        </p>
        
        <!-- Iconos para desktop en formato horizontal -->
        <div class="mt-8 mb-8 grid grid-cols-3 gap-6 text-center">
          <div class="animate-fade-in animate-delay-200 transform hover:scale-105 transition-transform duration-300 py-2 md:py-0">
            <div class="flex justify-center mb-3 md:mb-2">
              <Icon name="streamline-freehand:circus-tent" class="w-14 h-14 text-arvi-primary" />
            </div>
            <p class="text-base md:text-lg opacity-90">+15 años de experiencia</p>
          </div>
          <div class="animate-fade-in animate-delay-300 transform hover:scale-105 transition-transform duration-300 py-2 md:py-0">
            <div class="flex justify-center mb-3 md:mb-2">
              <Icon name="mdi:leaf" class="w-14 h-14 text-arvi-secondary" />
            </div>
            <p class="text-base md:text-lg opacity-90">Soluciones eco-sustentables</p>
          </div>
          <div class="animate-fade-in animate-delay-400 transform hover:scale-105 transition-transform duration-300 py-2 md:py-0">
            <div class="flex justify-center mb-3 md:mb-2">
              <Icon name="mdi:trophy" class="w-14 h-14 text-arvi-accent" />
            </div>
            <p class="text-base md:text-lg opacity-90">+1000 eventos realizados</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Indicador de scroll - Solo visible en desktop -->
  <div class=" absolute hidden md:block bottom-4 left-1/2 transform -translate-x-1/2 animate-bounce z-20">
    <div class="w-6 h-10 border-2 border-white rounded-full flex justify-center bg-black/20 backdrop-blur-sm">
      <div class="w-1 h-3 bg-white rounded-full mt-2"></div>
    </div>
  </div>

<script>
  // Efecto parallax optimizado con límite de traslación para evitar huecos
  document.addEventListener('DOMContentLoaded', () => {
    const parallaxBg = document.getElementById('parallaxBg');
    
    if (parallaxBg) {
      // Detectar si es un dispositivo móvil para aplicar un efecto más ligero
      const isMobile = window.matchMedia("(max-width: 768px)").matches;
      const parallaxIntensity = isMobile ? 0.06 : 0.12; // Reducimos un poco la intensidad
      const maxTranslate = isMobile ? 40 : 120; // Límite máximo de traslación en píxeles
      
      window.addEventListener('scroll', () => {
        // Usar requestAnimationFrame para mejor rendimiento
        requestAnimationFrame(() => {
          const scrollY = window.scrollY;
          // Limitamos la traslación para evitar huecos en el borde inferior
          const translate = Math.min(scrollY * parallaxIntensity, maxTranslate);
          parallaxBg.style.transform = `translateY(${translate}px) scale(1.05)`;
        });
      });
    }
  });
</script>
